import{h as M,i as h,j as e,r as u,y as o}from"./index-CyUoL3D5.js";import{a as z,u as A}from"./appointmentAPi-TXTHIF5M.js";const k=M.injectEndpoints({endpoints:t=>({getAllUsers:t.query({query:()=>`${h}/users`}),getAllAppointments:t.query({query:()=>`${h}/get-all-appointments`}),updateUser:t.mutation({query:({userId:s,updates:l})=>({url:`${h}/users/${s}`,method:"PUt",body:l})}),deleteUser:t.mutation({query:s=>({url:`${h}/users/${s}`,method:"DELETE"})})})}),{useGetAllUsersQuery:U,useUpdateUserMutation:R,useDeleteUserMutation:D}=k,B=({stats:t})=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:t.map((s,l)=>e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`${s.color} p-3 rounded-full text-white mr-4`,children:s.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:s.title}),e.jsx("p",{className:"text-2xl font-bold",children:s.value})]})]})},l))}),_=({activeTab:t,setActiveTab:s})=>e.jsx("div",{className:"bg-white shadow rounded-lg mb-8",children:e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("button",{onClick:()=>s("users"),className:`flex-1 py-4 px-6 text-center font-medium ${t==="users"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})}),"Users Management"]})}),e.jsx("button",{onClick:()=>s("appointments"),className:`flex-1 py-4 px-6 text-center font-medium ${t==="appointments"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),"Appointments Management"]})})]})}),$=({role:t})=>{const s={admin:"bg-purple-100 text-purple-800",user:"bg-blue-100 text-blue-800",doctor:"bg-green-100 text-green-800",patient:"bg-yellow-100 text-yellow-800"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s[t]||"bg-gray-100 text-gray-800"}`,children:t})},S=({users:t,handleUpdateUser:s,setConfirmDelete:l,isLoading:a})=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-6 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 font-medium text-sm",children:r.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:r.name}),r.created_at&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Joined ",new Date(r.created_at).toLocaleDateString()]})]})]})}),e.jsx("td",{className:"py-4 px-6 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:r.email})}),e.jsx("td",{className:"py-4 px-6 whitespace-nowrap",children:e.jsx($,{role:r.role})}),e.jsx("td",{className:"py-4 px-6 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"px-2 py-1 bg-blue-50 text-blue-600 rounded hover:bg-blue-100 transition text-sm",onClick:()=>s(r.id,{role:r.role==="admin"?"user":"admin"}),disabled:a,children:r.role==="admin"?"Demote":"Promote"}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-48 bg-gray-800 text-white text-xs rounded py-1 px-2 hidden group-hover:block",children:[r.role==="admin"?"Demote to regular user":"Promote to admin role",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-800"})]})]}),e.jsx("button",{className:"px-2 py-1 bg-red-50 text-red-600 rounded hover:bg-red-100 transition text-sm",onClick:()=>l(r),disabled:a,children:"Delete"})]})})]},r.id))})]})}),T=({status:t})=>{const s={pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s[t]||"bg-gray-100 text-gray-800"}`,children:t})},E=({appointments:t,handleUpdateAppointmentStatus:s,isLoading:l})=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient"}),e.jsx("th",{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor"}),e.jsx("th",{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-6 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.patient_name})}),e.jsx("td",{className:"py-4 px-6 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.doctor_name})}),e.jsxs("td",{className:"py-4 px-6 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:new Date(a.appointment_date).toLocaleDateString()}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(a.appointment_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("td",{className:"py-4 px-6 whitespace-nowrap",children:e.jsx(T,{status:a.status})}),e.jsx("td",{className:"py-4 px-6 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[a.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>s(a.appointment_id,"confirmed"),className:"px-2 py-1 bg-green-50 text-green-600 rounded hover:bg-green-100 transition text-sm flex items-center",disabled:l,children:[l?e.jsx("span",{className:"w-3 h-3 border-2 border-green-600 border-t-transparent rounded-full animate-spin mr-1"}):e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Confirm"]}),e.jsxs("button",{onClick:()=>s(a.appointment_id,"cancelled"),className:"px-2 py-1 bg-red-50 text-red-600 rounded hover:bg-red-100 transition text-sm flex items-center",disabled:l,children:[l?e.jsx("span",{className:"w-3 h-3 border-2 border-red-600 border-t-transparent rounded-full animate-spin mr-1"}):e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Cancel"]})]}),a.status==="confirmed"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>s(a.appointment_id,"completed"),className:"px-2 py-1 bg-blue-50 text-blue-600 rounded hover:bg-blue-100 transition text-sm flex items-center",disabled:l,children:[l?e.jsx("span",{className:"w-3 h-3 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mr-1"}):e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Complete"]}),e.jsx("button",{onClick:()=>s(a.appointment_id,"cancelled"),className:"px-2 py-1 bg-red-50 text-red-600 rounded hover:bg-red-100 transition text-sm flex items-center",disabled:l,children:"Cancel"})]}),(a.status==="completed"||a.status==="cancelled")&&e.jsx("span",{className:"text-xs text-gray-500",children:"No actions available"})]})})]},a.appointment_id))})]})}),F=()=>{const[t,s]=u.useState("users"),[l,a]=u.useState(null),[r,c]=u.useState(!1),{data:m=[],refetch:g}=U(),{data:p=[],refetch:j}=z(),[b]=R(),[f]=D(),[y]=A(),v=async(n,i)=>{var d;c(!0);try{await b({userId:n,updates:i}).unwrap(),o.success("User updated successfully"),g()}catch(x){console.error("Error updating user:",x),o.error(((d=x.data)==null?void 0:d.message)||"Failed to update user")}finally{c(!1)}},N=async n=>{var i;c(!0);try{await f(n).unwrap(),o.success("User deleted successfully"),g(),a(null)}catch(d){console.error("Error deleting user:",d),o.error(((i=d.data)==null?void 0:i.message)||"Failed to delete user")}finally{c(!1)}},w=async(n,i)=>{var d;c(!0);try{await y({appointmentId:n,status:i}).unwrap(),o.success(`Appointment ${i} successfully`),j()}catch(x){console.error("Error updating appointment status:",x),o.error(((d=x.data)==null?void 0:d.message)||"Failed to update appointment status")}finally{c(!1)}},C=[{title:"Total Users",value:m.length,icon:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM13 14a3 3 0 11-6 0 3 3 0 016 0z"})}),color:"bg-blue-500"},{title:"Total Appointments",value:p.length,icon:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),color:"bg-green-500"},{title:"Pending Appointments",value:p.filter(n=>n.status==="pending").length,icon:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),color:"bg-yellow-500"},{title:"Admin Users",value:m.filter(n=>n.role==="admin").length,icon:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z",clipRule:"evenodd"})}),color:"bg-purple-500"}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l&&e.jsx("div",{className:"fixed inset-0 backdrop-blur-md flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to delete the user "',l.name,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>a(null),className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition",disabled:r,children:"Cancel"}),e.jsx("button",{onClick:()=>N(l.id),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition flex items-center",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):"Delete User"})]})]})}),e.jsxs("div",{className:"p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage users and appointments"})]}),e.jsx(B,{stats:C}),e.jsx(_,{activeTab:t,setActiveTab:s}),e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[t==="users"?e.jsxs("div",{children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Users Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage user accounts and permissions"})]}),m.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"No Users Found"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"There are no users registered in the system."})]}):e.jsx(S,{users:m,handleUpdateUser:v,setConfirmDelete:a,isLoading:r})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Appointments Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage and track appointments"})]}),p.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"No Appointments Found"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"There are no appointments scheduled in the system."})]}):e.jsx(E,{appointments:p,handleUpdateAppointmentStatus:w,isLoading:r})]}),"z"]})]})]})};export{F as default};
