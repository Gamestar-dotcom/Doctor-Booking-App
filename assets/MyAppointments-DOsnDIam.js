import{r as i,k as _,l as M,y as g,j as e,b as A,L}from"./index-Dik9-elp.js";import{a as W,c as B}from"./appointmentAPi-BY5CFze9.js";const S=({isOpen:t,onClose:r,appointmentDetails:o,onSubmit:c})=>{const[a,p]=i.useState(""),[u,y]=i.useState((o==null?void 0:o.fee)||""),[d,x]=i.useState(""),[n,j]=i.useState(null),[h,m]=i.useState("initiate"),[w,{isLoading:v}]=_(),{data:f}=M(n,{skip:!n,pollingInterval:5e3});i.useEffect(()=>{var s;f&&(f.status==="Completed"?(m("completed"),g.success("Payment completed successfully!"),setTimeout(()=>{c(),r()},2e3)):f.status==="Failed"&&(m("failed"),x(((s=f.paymentRequest)==null?void 0:s.failure_reason)||"Payment failed. Please try again.")))},[f,c,r]);const C=async s=>{var P;if(s.preventDefault(),x(""),!a||a.length<10){x("Please enter a valid phone number");return}let l=a;!a.startsWith("254")&&a.startsWith("0")?l="254"+a.substring(1):a.startsWith("254")||(l="254"+a);const b=Math.floor(u);try{const N=await w({phoneNumber:l,amount:b}).unwrap();if(N.CheckoutRequestID)j(N.CheckoutRequestID),m("pending"),g.info("Payment initiated. Please check your phone.");else throw new Error("Invalid response from server.")}catch(N){x(((P=N.data)==null?void 0:P.message)||"Payment initiation failed. Please try again."),g.error(d||"Payment initiation failed")}},k=()=>{m("initiate"),j(null),x("")};return t?e.jsx("div",{className:"fixed inset-0 backdrop-blur-md bg-black/30 flex items-center justify-center z-50 transition-all duration-300",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md mx-4 border border-gray-100 transform transition-all",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("img",{src:"/Doctor-Booking-App/lipa-na-mpesa.jpg",alt:"M-Pesa Logo",className:"h-12 object-contain rounded "})}),e.jsx("button",{onClick:r,className:"text-gray-400 sm:text-black hover:text-gray-600 transition-colors p-1 rounded-full hover:bg-gray-100",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-8 text-center",children:[h==="initiate"&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-green-50 p-4 rounded-full mb-4",children:e.jsx("svg",{className:"h-12 w-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"text-gray-700 font-medium mb-2",children:"M-Pesa Payment"}),e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"You will receive an STK push notification on your phone."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enter your PIN when prompted to complete the transaction."})]}),h==="pending"&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"h-16 w-16 rounded-full bg-blue-50 flex items-center justify-center",children:e.jsxs("svg",{className:"animate-spin h-10 w-10 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})}),e.jsx("p",{className:"font-medium text-gray-800 mb-2",children:"Waiting for confirmation"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please check your phone and enter your M-Pesa PIN"})]}),h==="completed"&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-green-50 p-4 rounded-full mb-4",children:e.jsx("svg",{className:"h-12 w-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("p",{className:"font-medium text-green-600 mb-2 text-lg",children:"Payment Successful!"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your payment has been processed successfully."})]}),h==="failed"&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-red-50 p-4 rounded-full mb-4",children:e.jsx("svg",{className:"h-12 w-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("p",{className:"font-medium text-red-600 mb-2 text-lg",children:"Payment Failed"}),e.jsx("p",{className:"text-sm text-gray-600",children:"We couldn't process your payment. Please try again."})]})]}),d&&e.jsx("div",{className:"mb-6 p-3 bg-red-50 border border-red-100 text-red-700 text-sm rounded-lg",children:d}),h==="initiate"&&e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",placeholder:"e.g. 0712345678",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",value:a,onChange:s=>p(s.target.value),required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the phone number registered with M-Pesa"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount (KES)"}),e.jsx("input",{type:"number",className:"w-full p-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-700 font-medium",value:u,readOnly:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[e.jsx("button",{type:"button",onClick:r,className:"px-5 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 transition-colors font-medium shadow-sm",disabled:v,children:v?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Pay Now"})]})]}),h==="pending"&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx("button",{onClick:r,className:"px-5 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium",children:"Check Later"})}),h==="failed"&&e.jsxs("div",{className:"flex justify-center space-x-3 mt-6",children:[e.jsx("button",{onClick:k,className:"px-5 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors font-medium shadow-sm",children:"Try Again"}),e.jsx("button",{onClick:r,className:"px-5 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium",children:"Cancel"})]})]})}):null},z=({activeTab:t,setActiveTab:r})=>e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsx("button",{className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="upcoming"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>r("upcoming"),children:"Upcoming"}),e.jsx("button",{className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="past"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>r("past"),children:"Past"}),e.jsx("button",{className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="cancelled"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>r("cancelled"),children:"Cancelled"})]})}),I=({appointment:t,handleCancel:r,setCurrentAppointment:o,setIsMpesaModalOpen:c,isCancelling:a})=>{const p=d=>{const x=new Date(d);return new Intl.DateTimeFormat("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(x)},u=d=>{switch(d){case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"completed":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},y=d=>{switch(d){case"completed":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"pending":return"bg-amber-100 text-amber-800 border-amber-200";case"failed":return"bg-rose-100 text-rose-800 border-rose-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsx("div",{className:`bg-white shadow-sm border rounded-lg p-5 transition-all hover:shadow-md ${t.payment_status==="completed"?"border-green-300":"border-gray-200"}`,children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between",children:[e.jsxs("div",{className:"md:w-2/3",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("svg",{className:"h-5 w-5 text-blue-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Dr. ",t.doctor_name]})]}),e.jsxs("div",{className:"flex items-center mb-2 text-gray-600",children:[e.jsx("svg",{className:"h-5 w-5 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{children:p(t.appointment_date)})]}),t.reason&&e.jsxs("p",{className:"text-gray-500 mb-3",children:[e.jsx("span",{className:"font-medium",children:"Reason:"})," ",t.reason]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${u(t.status)}`,children:t.status}),t.payment_status&&e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${y(t.payment_status)}`,children:[t.payment_status==="pending"&&t.mpesa_receipt&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-1 h-3 w-3 text-amber-500",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Payment: ",t.payment_status]})]}),t.payment_status==="completed"&&t.status!=="completed"&&e.jsxs("p",{className:"text-sm text-green-600 mb-2",children:[e.jsx("svg",{className:"inline-block h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Payment received. We're setting up your booking."]}),t.payment_status==="pending"&&t.mpesa_receipt&&e.jsxs("p",{className:"text-sm text-amber-600 mb-2",children:[e.jsx("svg",{className:"inline-block h-4 w-4 mr-1 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Verifying payment..."]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 md:items-end md:space-y-0",children:[t.status==="pending"?null:e.jsx("img",{src:"/Doctor-Booking-App/mpesa-logo.png",className:"w-24 scale-100 "}),t.status==="pending"&&e.jsx("button",{onClick:()=>r(t.appointment_id),className:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 w-full md:w-auto disabled:opacity-50 disabled:cursor-not-allowed",disabled:a,children:a?"Cancelling...":"Cancel"}),t.status==="confirmed"&&t.payment_status!=="completed"&&!t.mpesa_receipt&&e.jsx("button",{onClick:()=>{o(t),c(!0)},className:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 w-full md:w-auto text-center",children:"Pay Now"}),t.payment_status==="pending"&&t.mpesa_receipt&&e.jsxs("button",{disabled:!0,className:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-amber-500 opacity-70 cursor-not-allowed w-full md:w-auto",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying Payment"]}),t.payment_status==="completed"&&e.jsxs("button",{disabled:!0,className:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 opacity-70 cursor-not-allowed w-full md:w-auto",children:[e.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Payment Received"]})]})]})})},V=({appointments:t,activeTab:r,handleCancel:o,setCurrentAppointment:c,setIsMpesaModalOpen:a,isCancelling:p})=>t.length===0?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No appointments"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r==="upcoming"?"You don't have any upcoming appointments. Check your status for recent bookings in the Past tab":r==="past"?"You don't have any past appointments.":"You don't have any cancelled appointments."})]}):e.jsx("div",{className:"space-y-4",children:t.map(u=>e.jsx(I,{appointment:u,handleCancel:o,setCurrentAppointment:c,setIsMpesaModalOpen:a,isCancelling:p},u.appointment_id))}),D=({appointmentId:t,mpesaReceipt:r,refetch:o})=>{const{data:c,isLoading:a}=M(r,{pollingInterval:5e3,skip:!r});return i.useEffect(()=>{c&&c.status==="completed"&&(o(),g.success("Payment confirmed! Your appointment has been updated."))},[c]),null},H=()=>{const{isAuthenticated:t,user:r}=A(s=>s.auth),[o,c]=i.useState("upcoming"),[a,p]=i.useState(!1),[u,y]=i.useState(null),[d,x]=i.useState([]),{data:n,isLoading:j,error:h,refetch:m}=W(),[w,{isLoading:v}]=B();i.useEffect(()=>{if(!n)return;const s=n.filter(l=>l.payment_status==="pending"&&l.mpesa_receipt);s.length>0&&x(s)},[n]),i.useEffect(()=>{if(d.length===0)return;const s=setInterval(()=>{m()},5e3);return()=>clearInterval(s)},[d,m]);const f=async s=>{const l=Number(s);if(isNaN(l)){console.error("Invalid appointment ID:",s),g.error("Failed to cancel appointment. Invalid ID.");return}try{await w(l).unwrap(),g.success("Appointment cancelled successfully!"),m()}catch(b){console.error("Error cancelling appointment:",b),g.error("Failed to cancel appointment. Please try again.")}},k=(()=>{if(!n||n.length===0)return[];const s=new Date;return n.filter(l=>{const b=new Date(l.appointment_date);return o==="upcoming"?b>=s&&l.status!=="cancelled"||l.payment_status==="completed"&&l.status!=="cancelled":o==="past"?b<s&&l.status!=="cancelled"&&l.payment_status!=="completed"||l.status==="completed":o==="cancelled"?l.status==="cancelled":!0})})();return!t||(r==null?void 0:r.role)!=="patient"?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-gray-50 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"You must be logged in as a patient to view your appointments."}),e.jsx(L,{to:"/login",className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",children:"Login"})]}):j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"animate-pulse flex space-x-2",children:[e.jsx("div",{className:"h-3 w-3 bg-blue-600 rounded-full"}),e.jsx("div",{className:"h-3 w-3 bg-blue-600 rounded-full"}),e.jsx("div",{className:"h-3 w-3 bg-blue-600 rounded-full"})]})}):h?e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 my-4 rounded shadow-sm",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:"Failed to load your appointments. Please try again later."})})]})}):e.jsxs("div",{className:"max-w-4xl mx-auto mt-6 px-4",children:[n==null?void 0:n.filter(s=>s.payment_status==="pending"&&s.mpesa_receipt).map(s=>e.jsx(D,{appointmentId:s.appointment_id,mpesaReceipt:s.mpesa_receipt,refetch:m},`status-checker-${s.appointment_id}`)),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-0 mb-6",children:[e.jsx("h2",{className:"text-xl sm:block sm:text-center sm:text-2xl font-bold text-gray-800",children:"My Appointments"}),e.jsx(L,{to:"/doctors",className:"px-3 py-1.5 sm:px-4 sm:py-2 bg-blue-600 text-white text-sm sm:text-base font-medium rounded-md hover:bg-blue-700 transition-colors w-full sm:w-auto text-center",children:"Book New Appointment"})]}),(n==null?void 0:n.some(s=>s.payment_status==="completed"&&s.status!=="completed"))&&e.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md text-green-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 mr-2 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Payment received!"})," We're setting up your appointment and will send a confirmation email shortly."]})]})}),(n==null?void 0:n.some(s=>s.payment_status==="pending"&&s.mpesa_receipt))&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-md text-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 mr-2 text-blue-500 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Checking payment status..."})," ","We're verifying your payment. This page will update automatically when the payment is confirmed."]})]})}),(n==null?void 0:n.some(s=>s.status==="pending"&&!s.mpesa_receipt))&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-md text-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("p",{children:["Hey ",e.jsx("span",{className:"font-semibold text-black",children:r.name}),", please check back here after making a payment to verify your appointment status."]})]})}),e.jsx(z,{activeTab:o,setActiveTab:c}),e.jsx(V,{appointments:k,activeTab:o,handleCancel:f,setCurrentAppointment:y,setIsMpesaModalOpen:p,isCancelling:v}),a&&e.jsx(S,{isOpen:a,onClose:()=>p(!1),appointmentDetails:u,onSubmit:()=>{g.success("Payment initiated! We'll update your appointment status once the payment is confirmed."),m()}})]})};export{H as default};
