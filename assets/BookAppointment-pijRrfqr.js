import{a as b,r as g,b as c,j as e,y as o}from"./index-DjcXVeJ2.js";import{b as x}from"./appointmentAPi-Cs-nsAZp.js";const y=()=>{const p=b(),[n,l]=g.useState(""),[m,{isLoading:i}]=x(),{isAuthenticated:d,user:a}=c(t=>t.auth),{currentDoctor:r}=c(t=>t.doctors);if(!r)return e.jsx("div",{className:"text-center py-6",children:"Doctor not found. Please go back and select a doctor."});const u=async t=>{if(t.preventDefault(),!d||(a==null?void 0:a.role)!=="patient"){o.error("You must be logged in as a patient to book an appointment.");return}if(!n){o.error("Please select an appointment date.");return}try{const s={doctorId:r.id,appointmentDate:n};await m(s).unwrap(),o.success("Appointment booked successfully!"),p("/appointments")}catch(s){console.error("Error booking appointment:",s),o.error("Failed to book appointment. Please try again.")}};return e.jsxs("div",{className:"max-w-md mx-auto mt-10 bg-white p-6 rounded-md shadow-md",children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-6 text-center",children:["Book Appointment with Dr. ",r.name]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"appointmentDate",children:"Appointment Date"}),e.jsx("input",{type:"datetime-local",id:"appointmentDate",value:n,onChange:t=>l(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-green-600 text-white font-bold py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50",disabled:i,children:i?"Booking...":"Book Appointment"})]})]})};export{y as default};
