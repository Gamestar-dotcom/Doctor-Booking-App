import{f as w,r as h,j as e,L as A,y as p}from"./index-BwcDF_mZ.js";import{a as D,c as k}from"./doctorApi-DrjENo5m.js";import{u as L}from"./appointmentAPi-DAOh7L9l.js";const _=()=>{var x;const{id:i}=w(),[n,u]=h.useState("upcoming"),{data:t,isLoading:g,error:b,refetch:l}=D(i),{data:a,isLoading:f,error:j,refetch:d}=k(i),[y,{isLoading:c}]=L(),o=async(s,r)=>{try{await y({appointmentId:s,status:r}).unwrap(),p.success(`Appointment ${r} successfully`),d()}catch(v){console.error("Error updating appointment status:",v),p.error("Failed to update appointment status")}};h.useEffect(()=>{l()},[t,l]);const N=()=>{if(!a)return[];switch(n){case"upcoming":return a.filter(s=>s.status==="pending"||s.status==="confirmed"&&new Date(s.appointment_date)>=new Date);case"confirmed":return a.filter(s=>s.status==="confirmed");case"cancelled":return a.filter(s=>s.status==="cancelled");case"completed":return a.filter(s=>s.status==="completed");default:return a}};if(g||f)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[e.jsx("div",{className:"h-10 w-40 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-32 w-full max-w-lg bg-gray-200 rounded"})]})});if(b||j)return e.jsxs("div",{className:"bg-red-50 text-red-800 p-6 rounded-lg mx-auto max-w-xl mt-10 text-center border border-red-200",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Error Loading Data"}),e.jsx("p",{children:"We couldn't load your dashboard information. Please try again later."}),e.jsx("button",{onClick:d,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition",children:"Try Again"})]});const m=N();return e.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-8 px-6 shadow-md",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("h2",{className:"text-3xl font-bold",children:["Welcome, Dr. ",t==null?void 0:t.name]}),e.jsx("p",{className:"text-blue-100 mt-2",children:"Manage your appointments and patient schedule"})]})}),e.jsx("div",{className:"flex flex-col justify-center items-center mb-6",children:!(t!=null&&t.speciality)&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-green-600 font-semibold mb-4",children:"Please finish updating you profile in the profile section"}),e.jsx(A,{onClick:()=>window.scrollTo(0,0),to:"/doctor/profile/update",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition",children:"Finish Profile"})]})}),e.jsx("div",{children:a.status==="pending"&&e.jsx("div",{className:"flex flex-col justify-center items-center mb-6",children:e.jsx("p",{className:"text-green-600 font-semibold mb-4",children:"Always come back within an hour to confirm whether the patient has completed their payment, the appointment will be cancelled if not and should be in the confirmed tab if payment has been made"})})}),e.jsx("div",{className:"max-w-6xl mx-auto mt-8 px-4",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border-b border-gray-100",children:e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Doctor Profile"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"h-24 w-24 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 text-3xl font-semibold",children:(x=t==null?void 0:t.name)==null?void 0:x.charAt(0)})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center border-b border-gray-100 pb-3",children:[e.jsx("span",{className:"font-medium text-gray-600 w-28",children:"Speciality:"}),e.jsx("span",{className:"text-gray-800",children:t==null?void 0:t.speciality})]}),e.jsxs("div",{className:"flex items-center border-b border-gray-100 pb-3",children:[e.jsx("span",{className:"font-medium text-gray-600 w-28",children:"Experience:"}),e.jsxs("span",{className:"text-gray-800",children:[t==null?void 0:t.experience," years"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-600 w-28",children:"Consultation:"}),e.jsxs("span",{className:"text-gray-800",children:["$",t==null?void 0:t.fee]})]})]}),e.jsx("div",{className:"pt-4 mt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-500",children:"Total Appointments"}),e.jsx("span",{className:"text-2xl font-bold text-gray-800",children:(a==null?void 0:a.length)||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-500",children:"Pending"}),e.jsx("span",{className:"text-2xl font-bold text-amber-600",children:(a==null?void 0:a.filter(s=>s.status==="pending").length)||0})]})]})})]})]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border-b border-gray-100",children:e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Appointments"})}),e.jsx("div",{className:"flex border-b border-gray-200",children:["upcoming","confirmed","cancelled","completed"].map(s=>e.jsx("button",{onClick:()=>u(s),className:`py-4 px-6 font-medium text-sm focus:outline-none ${n===s?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))}),e.jsx("div",{className:"p-6",children:m.length>0?e.jsx("div",{className:"space-y-4",children:m.map(s=>{const r=new Date(s.appointment_date);return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition",children:e.jsxs("div",{className:"flex justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:s.patient_name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mt-1",children:[e.jsx("span",{children:r.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]}),e.jsx("p",{className:"text-sm mt-1",children:s.patient_email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>o(s.appointment_id,"confirmed"),disabled:c,className:"px-3 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition text-sm",children:"Confirm"}),e.jsx("button",{onClick:()=>o(s.appointment_id,"cancelled"),disabled:c,className:"px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition text-sm",children:"Cancel"})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s.status==="confirmed"?"bg-green-100 text-green-800":s.status==="cancelled"?"bg-red-100 text-red-800":s.status==="completed"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:s.status})]})]})},s.appointment_id)})}):e.jsx("div",{className:"text-center py-12 border border-dashed border-gray-200 rounded-lg",children:e.jsxs("p",{className:"text-gray-500",children:["No ",n," appointments found."]})})})]})})]})})]})};export{_ as default};
