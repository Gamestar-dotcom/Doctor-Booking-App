import{a as j,r as i,b as N,j as e,y as m}from"./index-CN3Tzird.js";import{b as v}from"./doctorApi-BX_uKyBA.js";const E=()=>{const o=j(),[a,c]=i.useState(!1),[l,d]=i.useState({speciality:"",experience:"",fee:""}),s=N(t=>t.auth.user),[x,b]=i.useState(!0);i.useEffect(()=>{var t,r,n;s&&(s.role!=="doctor"?o("/login"):s.doctor?(d({speciality:((t=s==null?void 0:s.doctor)==null?void 0:t.speciality)||"",experience:((r=s==null?void 0:s.doctor)==null?void 0:r.experience)||"",fee:((n=s==null?void 0:s.doctor)==null?void 0:n.fee)||""}),b(!1)):o("/doctor/profile/update"))},[s,o]);const[p,{isLoading:f}]=v(),u=t=>{const{name:r,value:n}=t.target;d({...l,[r]:n})},g=async t=>{t.preventDefault();try{await p(l).unwrap(),c(!1),m.success("Profile updated successfully!"),o(`/doctor/dashboard/${s.doctorId}`)}catch(r){console.error("Error updating profile:",r),m.error("Failed to update profile. Please try again.")}},h=()=>{c(!a)},y=()=>{s.doctor&&d({speciality:s.doctor.speciality||"",experience:s.doctor.experience||"",fee:s.doctor.fee||""}),c(!1)};return x?e.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:e.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[e.jsx("div",{className:"rounded-full bg-blue-200 h-16 w-16 mb-4"}),e.jsx("div",{className:"h-4 bg-blue-200 rounded w-24 mb-6"}),e.jsx("div",{className:"text-blue-500 font-semibold",children:"Loading profile data..."})]})}):e.jsxs("div",{className:"max-w-xl mx-auto mt-12 bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-6 text-white",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Doctor Profile"}),a?null:e.jsx("button",{type:"button",onClick:h,className:"bg-white text-blue-600 font-bold py-2 px-4 rounded-full hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 transition-all duration-300 shadow-md",children:"Edit Profile"})]}),e.jsxs("p",{className:"text-blue-100 mt-1",children:["Dr. ",(s==null?void 0:s.name)||"Doctor"]})]}),e.jsxs("form",{onSubmit:g,className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Speciality"}),a?e.jsx("input",{type:"text",name:"speciality",value:l.speciality,onChange:u,className:"w-full border border-gray-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200",placeholder:"e.g. Cardiology, Neurology"}):e.jsx("div",{className:"w-full border border-gray-200 bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-blue-600 font-bold",children:"S"})}),e.jsx("span",{className:"text-gray-700 font-medium",children:l.speciality||"Not specified"})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Experience (years)"}),a?e.jsx("input",{type:"number",name:"experience",value:l.experience,onChange:u,className:"w-full border border-gray-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200",placeholder:"Years of professional experience"}):e.jsx("div",{className:"w-full border border-gray-200 bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-green-100 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-green-600 font-bold",children:"E"})}),e.jsx("span",{className:"text-gray-700 font-medium",children:l.experience?`${l.experience} years`:"Not specified"})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Consultation Fee"}),a?e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-3 text-gray-500",children:"$"}),e.jsx("input",{type:"number",name:"fee",value:l.fee,onChange:u,className:"w-full border border-gray-300 p-3 pl-8 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200",placeholder:"Your consultation fee"})]}):e.jsx("div",{className:"w-full border border-gray-200 bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-yellow-100 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-yellow-600 font-bold",children:"$"})}),e.jsx("span",{className:"text-gray-700 font-medium",children:l.fee?`$${l.fee}`:"Not specified"})]})})]}),a&&e.jsxs("div",{className:"flex gap-4 mt-8",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-blue-800 focus:outline-none shadow-lg transform transition-all duration-300 hover:-translate-y-1",disabled:f,children:f?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Changes"}),e.jsx("button",{type:"button",onClick:y,className:"flex-1 bg-gray-200 text-gray-800 font-bold py-3 px-6 rounded-lg hover:bg-gray-300 focus:outline-none shadow transition-all duration-300",children:"Cancel"})]})]})]})};export{E as default};
